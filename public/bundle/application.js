"use strict";var ou3=angular.module("ou3",["ngTouch","ngAnimate"]);ou3.factory("placer",[function(){function e(e,o){for(var t={},n=0,a=o.length;a>n;n++){var r=$.grep(e,function(e,t){return e.types[0]==o[n]});r.length&&(t[o[n]]=r[0].long_name)}return t}var o=function(o){return level_codes=["neighborhood","route","postal_code","postal_code_suffix","locality","sublocality_level_1","administrative_area_level_1","administrative_area_level_2"],e(o,level_codes)};return{extract:o}}]),ou3.factory("brooxMap",["$q","$window",function(e,o){function t(){i.resolve(!0)}function n(e){var o={center:p,zoom:15,disableDefaultUI:!0,mapTypeControl:!0,mapTypeControlOptions:{style:l.maps.MapTypeControlStyle.DROPDOWN_MENU},streetViewControl:!0};s=new l.maps.Map(e,o),u.resolve(),r()}function a(e){p=e,s&&(s.setCenter(p),r())}function r(){c&&c.setMap(null),c=new l.maps.Marker({position:p,map:s,animation:l.maps.Animation.DROP,title:"You are Here"})}var l=o.google,i=e.defer(),u=e.defer(),p={lat:40.216339,lng:-74.741427},s=null,c=null;return l.maps.event.addDomListener(o,"load",t),{loadGoogle:i.promise,mapLoaded:u.promise,google:l,initMap:n,updateMap:a,LatLng:l.maps.LatLng,getMarker:function(){return c},getMap:function(){return s}}}]);
"use strict";ou3.controller("DataController",["$scope","placer","brooxMap","$window",function(o,e,n,t){o.mapLoaded=!1,o.area={},o.$on("geocode",function(n,t){o.area=e.extract(t),o.$apply()}),o.toggleMiniLock=function(){console.log("toggling"),o.$emit("toggle_mini_lock")},o.handleUpdatePosition=function(){console.log("handleUpdatePosition Called",arguments,Date.now()),o.$emit("update_position")},o.reload=function(){t.location.reload()},n.mapLoaded.then(function(e){o.mapLoaded=!0})}]);
"use strict";ou3.controller("MainController",["$scope","$window","brooxMap",function(o,n,t){function i(n){n.length&&n[0].address_components&&o.$broadcast("geocode",n[0].address_components)}n.navigator.geolocation||alert("This isn't gonna work out :/");var e=new t.google.maps.Geocoder,a=document.querySelector("#map-canvas");o.miniLock=!1,o.$on("toggle_mini_lock",function(n){o.miniLock=!o.miniLock}),o.position={lat:40.216339,lng:-74.741427},o.updatePosition=function(){console.log("update position called"),n.navigator.geolocation.getCurrentPosition(function(n){o.position=new t.LatLng(n.coords.latitude,n.coords.longitude),t.updateMap(o.position),e.geocode({latLng:o.position},i)})},o.$on("update_position",o.updatePosition),t.loadGoogle.then(function(){t.initMap(a),o.updatePosition()})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9vdTMuanMiLCJhcHAvY29udHJvbGxlcnMvZGF0YV9jb250cm9sbGVyLmpzIiwiYXBwL2NvbnRyb2xsZXJzL21haW5fY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJvdTMiLCJhbmd1bGFyIiwibW9kdWxlIiwiZmFjdG9yeSIsInR5cGVHcmVwIiwiZGF0YSIsImxldmVsX2NvZGVzIiwiZXh0cmFjdE9iaiIsImkiLCJuIiwibGVuZ3RoIiwiaXRlbSIsIiQiLCJncmVwIiwiZCIsImlkeCIsInR5cGVzIiwiZXh0cmFjdCIsIiRxIiwiJHdpbmRvdyIsImdvb2dsZUxvYWRlZCIsImxvYWRHb29nbGVEZWZlciIsInJlc29sdmUiLCJpbml0TWFwIiwiY2FudmFzIiwibWFwT3B0aW9ucyIsImNlbnRlciIsImNvb3JkaW5hdGVzIiwiem9vbSIsImRpc2FibGVEZWZhdWx0VUkiLCJtYXBUeXBlQ29udHJvbCIsIm1hcFR5cGVDb250cm9sT3B0aW9ucyIsInN0eWxlIiwiZ29vZ2xlIiwibWFwcyIsIk1hcFR5cGVDb250cm9sU3R5bGUiLCJEUk9QRE9XTl9NRU5VIiwic3RyZWV0Vmlld0NvbnRyb2wiLCJtYXAiLCJNYXAiLCJtYXBMb2FkZWREZWZlciIsInNldE1hcmtlciIsInVwZGF0ZU1hcCIsImNvb3JkcyIsInNldENlbnRlciIsImN1cnJlbnRNYXJrZXIiLCJzZXRNYXAiLCJNYXJrZXIiLCJwb3NpdGlvbiIsImFuaW1hdGlvbiIsIkFuaW1hdGlvbiIsIkRST1AiLCJ0aXRsZSIsImRlZmVyIiwibGF0IiwibG5nIiwiZXZlbnQiLCJhZGREb21MaXN0ZW5lciIsImxvYWRHb29nbGUiLCJwcm9taXNlIiwibWFwTG9hZGVkIiwiTGF0TG5nIiwiZ2V0TWFya2VyIiwiZ2V0TWFwIiwiY29udHJvbGxlciIsIiRzY29wZSIsInBsYWNlciIsImJyb294TWFwIiwiYXJlYSIsIiRvbiIsImUiLCIkYXBwbHkiLCJ0b2dnbGVNaW5pTG9jayIsImNvbnNvbGUiLCJsb2ciLCIkZW1pdCIsImhhbmRsZVVwZGF0ZVBvc2l0aW9uIiwiYXJndW1lbnRzIiwiRGF0ZSIsIm5vdyIsInJlbG9hZCIsImxvY2F0aW9uIiwidGhlbiIsImhhbmRsZUdlb0NvZGUiLCIkYnJvYWRjYXN0IiwibmF2aWdhdG9yIiwiZ2VvbG9jYXRpb24iLCJhbGVydCIsImdlb2NvZGVyIiwiR2VvY29kZXIiLCJtYXBDYW52YXMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJtaW5pTG9jayIsInVwZGF0ZVBvc2l0aW9uIiwiZ2V0Q3VycmVudFBvc2l0aW9uIiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJnZW9jb2RlIiwibGF0TG5nIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFBLElBQUlBLEtBQU1DLFFBQVFDLE9BQU8sT0FBUSxVQUFXLGFBRTVDRixLQUFJRyxRQUFRLFVBQVcsV0FrQnJCLFFBQVNDLEdBQVVDLEVBQUtDLEdBSXRCLElBQUksR0FGQUMsTUFFSUMsRUFBSSxFQUFHQyxFQUFJSCxFQUFZSSxPQUFZRCxFQUFKRCxFQUFPQSxJQUFLLENBQ2pELEdBQUlHLEdBQU9DLEVBQUVDLEtBQUtSLEVBQU0sU0FBVVMsRUFBR0MsR0FDbkMsTUFBT0QsR0FBRUUsTUFBTSxJQUFNVixFQUFZRSxJQUUvQkcsR0FBS0QsU0FDUEgsRUFBV0QsRUFBWUUsSUFBTUcsRUFBSyxHQUFjLFdBSXBELE1BQU9KLEdBN0JULEdBQUlVLEdBQVUsU0FBVVosR0FhdEIsTUFYQUMsY0FDRSxlQUNBLFFBQ0EsY0FDQSxxQkFDQSxXQUNBLHNCQUNBLDhCQUNBLCtCQUdLRixFQUFTQyxFQUFLQyxhQW1CdkIsUUFDRVcsUUFBU0EsTUFNYmpCLElBQUlHLFFBQVEsWUFBYSxLQUFLLFVBQVcsU0FBVWUsRUFBSUMsR0FVckQsUUFBU0MsS0FDUEMsRUFBZ0JDLFNBQVEsR0FHMUIsUUFBU0MsR0FBU0MsR0FDaEIsR0FBSUMsSUFDRkMsT0FBUUMsRUFDUkMsS0FBTSxHQUNOQyxrQkFBa0IsRUFDbEJDLGdCQUFnQixFQUNoQkMsdUJBQ0VDLE1BQU9DLEVB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bGUoXCJvdTNcIiwgWyduZ1RvdWNoJywgJ25nQW5pbWF0ZSddKTtcblxub3UzLmZhY3RvcnkoJ3BsYWNlcicsIFtmdW5jdGlvbiAoKSB7XG5cbiAgdmFyIGV4dHJhY3QgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgIC8vICp1c3VhbGx5KiBhYTEgPSBzdGF0ZSBhYTI9IGNvdW50eSAgc2wxID0gYm9yb3VnaFxuICAgIGxldmVsX2NvZGVzID0gW1xuICAgICAgJ25laWdoYm9yaG9vZCcsXG4gICAgICAncm91dGUnLFxuICAgICAgJ3Bvc3RhbF9jb2RlJyxcbiAgICAgICdwb3N0YWxfY29kZV9zdWZmaXgnLFxuICAgICAgJ2xvY2FsaXR5JyxcbiAgICAgICdzdWJsb2NhbGl0eV9sZXZlbF8xJyxcbiAgICAgICdhZG1pbmlzdHJhdGl2ZV9hcmVhX2xldmVsXzEnLFxuICAgICAgJ2FkbWluaXN0cmF0aXZlX2FyZWFfbGV2ZWxfMidcbiAgICBdO1xuXG4gICAgcmV0dXJuIHR5cGVHcmVwKGRhdGEsbGV2ZWxfY29kZXMpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHR5cGVHcmVwIChkYXRhLGxldmVsX2NvZGVzKSB7XG4gICAgLy9uZWVkIHRvIGZpZ3VyZSBvdXQgaG93IHRvIGZpbmQgd2hhdCBmYWlsZWRcbiAgICB2YXIgZXh0cmFjdE9iaiA9ICB7fTtcblxuICAgIGZvcih2YXIgaSA9IDAsIG4gPSBsZXZlbF9jb2Rlcy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgIHZhciBpdGVtID0gJC5ncmVwKGRhdGEsIGZ1bmN0aW9uIChkLCBpZHgpIHtcbiAgICAgICAgcmV0dXJuIGQudHlwZXNbMF0gPT0gbGV2ZWxfY29kZXNbaV1cbiAgICAgIH0pO1xuICAgICAgaWYgKGl0ZW0ubGVuZ3RoKSB7XG4gICAgICAgIGV4dHJhY3RPYmpbbGV2ZWxfY29kZXNbaV1dID0gaXRlbVswXVsnbG9uZ19uYW1lJ11cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZXh0cmFjdE9iajtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZXh0cmFjdDogZXh0cmFjdFxuICB9XG5cbn1dKTtcblxuXG5vdTMuZmFjdG9yeSgnYnJvb3hNYXAnLCBbJyRxJywnJHdpbmRvdycsIGZ1bmN0aW9uICgkcSwgJHdpbmRvdykge1xuICB2YXIgZ29vZ2xlID0gJHdpbmRvdy5nb29nbGU7XG4gIHZhciBsb2FkR29vZ2xlRGVmZXIgPSAkcS5kZWZlcigpO1xuICB2YXIgbWFwTG9hZGVkRGVmZXIgPSAkcS5kZWZlcigpO1xuICB2YXIgY29vcmRpbmF0ZXMgPSB7bGF0OiA0MC4yMTYzMzksIGxuZzogLTc0Ljc0MTQyN307XG4gIHZhciBtYXAgPSBudWxsO1xuICB2YXIgY3VycmVudE1hcmtlciA9IG51bGw7XG5cbiAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkRG9tTGlzdGVuZXIoJHdpbmRvdywgJ2xvYWQnLCBnb29nbGVMb2FkZWQpO1xuXG4gIGZ1bmN0aW9uIGdvb2dsZUxvYWRlZCAoKSB7XG4gICAgbG9hZEdvb2dsZURlZmVyLnJlc29sdmUodHJ1ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBpbml0TWFwIChjYW52YXMpIHtcbiAgICB2YXIgbWFwT3B0aW9ucyA9IHtcbiAgICAgIGNlbnRlcjogY29vcmRpbmF0ZXMsIC8vbmV3ICRnLm1hcHMuTGF0TG5nKCRzY29wZS5wb3NpdGlvbi5sYXRpdHVkZSwgJHNjb3BlLnBvc2l0aW9uLmxvbmdpdHVkZSksXG4gICAgICB6b29tOiAxNSxcbiAgICAgIGRpc2FibGVEZWZhdWx0VUk6IHRydWUsXG4gICAgICBtYXBUeXBlQ29udHJvbDogdHJ1ZSxcbiAgICAgIG1hcFR5cGVDb250cm9sT3B0aW9uczoge1xuICAgICAgICBzdHlsZTogZ29vZ2xlLm1hcHMuTWFwVHlwZUNvbnRyb2xTdHlsZS5EUk9QRE9XTl9NRU5VXG4gICAgICB9LFxuICAgICAgc3RyZWV0Vmlld0NvbnRyb2w6dHJ1ZVxuICAgIH07XG5cbiAgICBtYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGNhbnZhcywgbWFwT3B0aW9ucyk7XG4gICAgbWFwTG9hZGVkRGVmZXIucmVzb2x2ZSgpO1xuICAgIHNldE1hcmtlcigpO1xuXG4gICAgLy9yZXR1cm4gbWFwO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlTWFwIChjb29yZHMpIHtcbiAgICAvL2NvbnNvbGUubG9nKFwiQ29vcmRzXCIsIGNvb3JkcylcbiAgICAvL2lmICghY29vcmRpbmF0ZXMuaGFzT3duUHJvcGVydHkoJ2snKSkge1xuICAgICAgLy9jb29yZGluYXRlcyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoY29vcmRzLmxhdGl0dWRlLCBjb29yZHMubG9uZ2l0dWRlKVxuICAgIC8vfSBlbHNlIHtcbiAgICAgIGNvb3JkaW5hdGVzID0gY29vcmRzO1xuICAgIC8vfVxuXG5cbiAgICBpZihtYXApIHtcbiAgICAgIG1hcC5zZXRDZW50ZXIoY29vcmRpbmF0ZXMpO1xuICAgICAgc2V0TWFya2VyKCk7XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIHNldE1hcmtlciAoKSB7XG4gICAgaWYgKGN1cnJlbnRNYXJrZXIpIHtcbiAgICAgIGN1cnJlbnRNYXJrZXIuc2V0TWFwKG51bGwpXG4gICAgfVxuXG4gICAgY3VycmVudE1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xuICAgICAgcG9zaXRpb246IGNvb3JkaW5hdGVzLFxuICAgICAgbWFwOiBtYXAsXG4gICAgICBhbmltYXRpb246IGdvb2dsZS5tYXBzLkFuaW1hdGlvbi5EUk9QLFxuICAgICAgdGl0bGU6IFwiWW91IGFyZSBIZXJlXCJcbiAgICB9KVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBsb2FkR29vZ2xlOiBsb2FkR29vZ2xlRGVmZXIucHJvbWlzZSxcbiAgICBtYXBMb2FkZWQ6IG1hcExvYWRlZERlZmVyLnByb21pc2UsXG4gICAgZ29vZ2xlOiBnb29nbGUsXG4gICAgaW5pdE1hcDogaW5pdE1hcCxcbiAgICB1cGRhdGVNYXA6IHVwZGF0ZU1hcCxcbiAgICBMYXRMbmc6IGdvb2dsZS5tYXBzLkxhdExuZyxcbiAgICBnZXRNYXJrZXI6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGN1cnJlbnRNYXJrZXJ9LFxuICAgIGdldE1hcDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbWFwfVxuICB9XG5cbn1dKTtcbiIsIm91My5jb250cm9sbGVyKCdEYXRhQ29udHJvbGxlcicsIFtcbiAgJyRzY29wZScsXG4gICdwbGFjZXInLFxuICAnYnJvb3hNYXAnLFxuICAnJHdpbmRvdycsXG4gIGZ1bmN0aW9uICgkc2NvcGUsIHBsYWNlciwgYnJvb3hNYXAsICR3aW5kb3cpIHtcbiAgJHNjb3BlLm1hcExvYWRlZCA9IGZhbHNlO1xuICAkc2NvcGUuYXJlYSA9IHt9O1xuXG4gICRzY29wZS4kb24oJ2dlb2NvZGUnLCBmdW5jdGlvbiAoZSwgZGF0YSkge1xuICAgICRzY29wZS5hcmVhID0gcGxhY2VyLmV4dHJhY3QoZGF0YSk7XG4gICAgJHNjb3BlLiRhcHBseSgpOyAvL2kga25vdyBpIGtub3cgaSBoYXZlIHRvIHJlZmFjdG9yIHRoaXNcblxuICB9KTtcblxuICAkc2NvcGUudG9nZ2xlTWluaUxvY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgY29uc29sZS5sb2coXCJ0b2dnbGluZ1wiKVxuICAgICRzY29wZS4kZW1pdCgndG9nZ2xlX21pbmlfbG9jaycpO1xuICB9O1xuXG4gICRzY29wZS5oYW5kbGVVcGRhdGVQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zb2xlLmxvZyhcImhhbmRsZVVwZGF0ZVBvc2l0aW9uIENhbGxlZFwiLCBhcmd1bWVudHMsIERhdGUubm93KCkpXG4gICAgJHNjb3BlLiRlbWl0KCd1cGRhdGVfcG9zaXRpb24nKVxuICB9O1xuXG4gICRzY29wZS5yZWxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgJHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgfTtcblxuXG4gIGJyb294TWFwLm1hcExvYWRlZC50aGVuKGZ1bmN0aW9uIChtYXApIHtcbiAgICAkc2NvcGUubWFwTG9hZGVkID0gdHJ1ZTtcbiAgfSk7XG5cbn1dKSIsIm91My5jb250cm9sbGVyKCdNYWluQ29udHJvbGxlcicsIFtcbiAgJyRzY29wZScsXG4gICckd2luZG93JyxcbiAgJ2Jyb294TWFwJyxcbiAgZnVuY3Rpb24gKCRzY29wZSwgJHdpbmRvdywgYnJvb3hNYXApIHtcbiAgICAvL2luaXRpYWwgY2hlY2tcbiAgICBpZiAoISR3aW5kb3cubmF2aWdhdG9yLmdlb2xvY2F0aW9uKSB7XG4gICAgICBhbGVydChcIlRoaXMgaXNuJ3QgZ29ubmEgd29yayBvdXQgOi9cIik7XG4gICAgfVxuXG4gICAgdmFyIGdlb2NvZGVyID0gbmV3IGJyb294TWFwLmdvb2dsZS5tYXBzLkdlb2NvZGVyKCk7XG4gICAgdmFyIG1hcENhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtYXAtY2FudmFzJyk7XG5cbiAgICAkc2NvcGUubWluaUxvY2sgPSBmYWxzZTtcbiAgICAkc2NvcGUuJG9uKCd0b2dnbGVfbWluaV9sb2NrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICRzY29wZS5taW5pTG9jayA9ICEkc2NvcGUubWluaUxvY2s7XG4gICAgfSk7XG5cblxuICAgICRzY29wZS5wb3NpdGlvbiA9IHtsYXQ6NDAuMjE2MzM5LCBsbmc6IC03NC43NDE0Mjd9OyAgLy9kZWZhdWx0IGNvb3Jkc1xuICAgICRzY29wZS51cGRhdGVQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwidXBkYXRlIHBvc2l0aW9uIGNhbGxlZFwiKTtcbiAgICAgICR3aW5kb3cubmF2aWdhdG9yLmdlb2xvY2F0aW9uLmdldEN1cnJlbnRQb3NpdGlvbihmdW5jdGlvbiAobG9jYXRpb24pIHtcbiAgICAgICAgJHNjb3BlLnBvc2l0aW9uID0gbmV3IGJyb294TWFwLkxhdExuZyhsb2NhdGlvbi5jb29yZHMubGF0aXR1ZGUsIGxvY2F0aW9uLmNvb3Jkcy5sb25naXR1ZGUpO1xuICAgICAgICBicm9veE1hcC51cGRhdGVNYXAoJHNjb3BlLnBvc2l0aW9uKTtcbiAgICAgICAgZ2VvY29kZXIuZ2VvY29kZSh7J2xhdExuZyc6ICRzY29wZS5wb3NpdGlvbn0sIGhhbmRsZUdlb0NvZGUpO1xuICAgICAgfSlcbiAgICB9O1xuXG4gICAgJHNjb3BlLiRvbigndXBkYXRlX3Bvc2l0aW9uJywgJHNjb3BlLnVwZGF0ZVBvc2l0aW9uKVxuXG4gICAgLy9tYWtlIHN1cmUgZ29vZ2xlIHNlcnZpY2UgaXMgbG9hZGVkXG4gICAgYnJvb3hNYXAubG9hZEdvb2dsZS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgIGJyb294TWFwLmluaXRNYXAobWFwQ2FudmFzKTtcbiAgICAgICRzY29wZS51cGRhdGVQb3NpdGlvbigpO1xuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gaGFuZGxlR2VvQ29kZSAoZGF0YSkge1xuICAgICAgaWYgKGRhdGEubGVuZ3RoICYmIGRhdGFbMF1bJ2FkZHJlc3NfY29tcG9uZW50cyddKSB7XG4gICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdnZW9jb2RlJywgZGF0YVswXVsnYWRkcmVzc19jb21wb25lbnRzJ10pXG4gICAgICB9XG4gICAgfVxuXG59XSkiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
