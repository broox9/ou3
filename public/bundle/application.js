"use strict";var ou3=angular.module("ou3",["angular-gestures","ngAnimate"]);ou3.factory("placer",[function(){function e(e,t){for(var o={},n=0,a=t.length;a>n;n++){var r=$.grep(e,function(e,o){return e.types[0]==t[n]});r.length&&(o[t[n]]=r[0].long_name)}return o}var t=function(t){return level_codes=["neighborhood","route","postal_code","postal_code_suffix","locality","sublocality_level_1","administrative_area_level_1","administrative_area_level_2"],e(t,level_codes)};return{extract:t}}]),ou3.factory("brooxMap",["$q","$window",function(e,t){function o(){i.resolve(!0)}function n(e){var t={center:s,zoom:15,disableDefaultUI:!0,mapTypeControl:!0,mapTypeControlOptions:{style:l.maps.MapTypeControlStyle.DROPDOWN_MENU},streetViewControl:!0};p=new l.maps.Map(e,t),u.resolve(),r()}function a(e){s=e,p&&(p.setCenter(s),r())}function r(){c&&c.setMap(null),c=new l.maps.Marker({position:s,map:p,animation:l.maps.Animation.DROP,title:"You are Here"})}var l=t.google,i=e.defer(),u=e.defer(),s={lat:40.216339,lng:-74.741427},p=null,c=null;return l.maps.event.addDomListener(t,"load",o),{loadGoogle:i.promise,mapLoaded:u.promise,google:l,initMap:n,updateMap:a,LatLng:l.maps.LatLng,getMarker:function(){return c},getMap:function(){return p}}}]);
"use strict";ou3.controller("DataController",["$scope","placer","brooxMap","$window",function(o,e,n,t){o.mapLoaded=!1,o.area={},o.$on("geocode",function(n,t){o.area=e.extract(t),o.$apply()}),o.toggleMiniLock=function(){console.log("toggling"),o.$emit("toggle_mini_lock")},o.handleUpdatePosition=function(){console.log("handleUpdatePosition Called",arguments,Date.now()),o.$emit("update_position")},o.reload=function(){t.location.reload()},n.mapLoaded.then(function(e){o.mapLoaded=!0})}]);
"use strict";ou3.controller("MainController",["$scope","$window","brooxMap",function(o,n,t){function i(n){n.length&&n[0].address_components&&o.$broadcast("geocode",n[0].address_components)}n.navigator.geolocation||alert("This isn't gonna work out :/");var e=new t.google.maps.Geocoder,a=document.querySelector("#map-canvas");o.miniLock=!1,o.$on("toggle_mini_lock",function(n){o.miniLock=!o.miniLock}),o.position={lat:40.216339,lng:-74.741427},o.updatePosition=function(){console.log("update position called"),n.navigator.geolocation.getCurrentPosition(function(n){o.position=new t.LatLng(n.coords.latitude,n.coords.longitude),t.updateMap(o.position),e.geocode({latLng:o.position},i)})},o.$on("update_position",o.updatePosition),t.loadGoogle.then(function(){t.initMap(a),o.updatePosition()})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9vdTMuanMiLCJhcHAvY29udHJvbGxlcnMvZGF0YV9jb250cm9sbGVyLmpzIiwiYXBwL2NvbnRyb2xsZXJzL21haW5fY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJvdTMiLCJhbmd1bGFyIiwibW9kdWxlIiwiZmFjdG9yeSIsInR5cGVHcmVwIiwiZGF0YSIsImxldmVsX2NvZGVzIiwiZXh0cmFjdE9iaiIsImkiLCJuIiwibGVuZ3RoIiwiaXRlbSIsIiQiLCJncmVwIiwiZCIsImlkeCIsInR5cGVzIiwiZXh0cmFjdCIsIiRxIiwiJHdpbmRvdyIsImdvb2dsZUxvYWRlZCIsImxvYWRHb29nbGVEZWZlciIsInJlc29sdmUiLCJpbml0TWFwIiwiY2FudmFzIiwibWFwT3B0aW9ucyIsImNlbnRlciIsImNvb3JkaW5hdGVzIiwiem9vbSIsImRpc2FibGVEZWZhdWx0VUkiLCJtYXBUeXBlQ29udHJvbCIsIm1hcFR5cGVDb250cm9sT3B0aW9ucyIsInN0eWxlIiwiZ29vZ2xlIiwibWFwcyIsIk1hcFR5cGVDb250cm9sU3R5bGUiLCJEUk9QRE9XTl9NRU5VIiwic3RyZWV0Vmlld0NvbnRyb2wiLCJtYXAiLCJNYXAiLCJtYXBMb2FkZWREZWZlciIsInNldE1hcmtlciIsInVwZGF0ZU1hcCIsImNvb3JkcyIsInNldENlbnRlciIsImN1cnJlbnRNYXJrZXIiLCJzZXRNYXAiLCJNYXJrZXIiLCJwb3NpdGlvbiIsImFuaW1hdGlvbiIsIkFuaW1hdGlvbiIsIkRST1AiLCJ0aXRsZSIsImRlZmVyIiwibGF0IiwibG5nIiwiZXZlbnQiLCJhZGREb21MaXN0ZW5lciIsImxvYWRHb29nbGUiLCJwcm9taXNlIiwibWFwTG9hZGVkIiwiTGF0TG5nIiwiZ2V0TWFya2VyIiwiZ2V0TWFwIiwiY29udHJvbGxlciIsIiRzY29wZSIsInBsYWNlciIsImJyb294TWFwIiwiYXJlYSIsIiRvbiIsImUiLCIkYXBwbHkiLCJ0b2dnbGVNaW5pTG9jayIsImNvbnNvbGUiLCJsb2ciLCIkZW1pdCIsImhhbmRsZVVwZGF0ZVBvc2l0aW9uIiwiYXJndW1lbnRzIiwiRGF0ZSIsIm5vdyIsInJlbG9hZCIsImxvY2F0aW9uIiwidGhlbiIsImhhbmRsZUdlb0NvZGUiLCIkYnJvYWRjYXN0IiwibmF2aWdhdG9yIiwiZ2VvbG9jYXRpb24iLCJhbGVydCIsImdlb2NvZGVyIiwiR2VvY29kZXIiLCJtYXBDYW52YXMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJtaW5pTG9jayIsInVwZGF0ZVBvc2l0aW9uIiwiZ2V0Q3VycmVudFBvc2l0aW9uIiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJnZW9jb2RlIiwibGF0TG5nIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFBLElBQUlBLEtBQU1DLFFBQVFDLE9BQU8sT0FBUSxtQkFBb0IsYUFFckRGLEtBQUlHLFFBQVEsVUFBVyxXQWtCckIsUUFBU0MsR0FBVUMsRUFBS0MsR0FJdEIsSUFBSSxHQUZBQyxNQUVJQyxFQUFJLEVBQUdDLEVBQUlILEVBQVlJLE9BQVlELEVBQUpELEVBQU9BLElBQUssQ0FDakQsR0FBSUcsR0FBT0MsRUFBRUMsS0FBS1IsRUFBTSxTQUFVUyxFQUFHQyxHQUNuQyxNQUFPRCxHQUFFRSxNQUFNLElBQU1WLEVBQVlFLElBRS9CRyxHQUFLRCxTQUNQSCxFQUFXRCxFQUFZRSxJQUFNRyxFQUFLLEdBQWMsV0FJcEQsTUFBT0osR0E3QlQsR0FBSVUsR0FBVSxTQUFVWixHQWF0QixNQVhBQyxjQUNFLGVBQ0EsUUFDQSxjQUNBLHFCQUNBLFdBQ0Esc0JBQ0EsOEJBQ0EsK0JBR0tGLEVBQVNDLEVBQUtDLGFBbUJ2QixRQUNFVyxRQUFTQSxNQU1iakIsSUFBSUcsUUFBUSxZQUFhLEtBQUssVUFBVyxTQUFVZSxFQUFJQyxHQVVyRCxRQUFTQyxLQUNQQyxFQUFnQkMsU0FBUSxHQUcxQixRQUFTQyxHQUFTQyxHQUNoQixHQUFJQyxJQUNGQyxPQUFRQyxFQUNSQyxLQUFNLEdBQ05DLGtCQUFrQixFQUNsQkMsZ0JBQWdCLEVBQ2hCQyx1QkFDRUMsTUFBT0Ms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ZHVsZShcIm91M1wiLCBbJ2FuZ3VsYXItZ2VzdHVyZXMnLCAnbmdBbmltYXRlJ10pO1xuXG5vdTMuZmFjdG9yeSgncGxhY2VyJywgW2Z1bmN0aW9uICgpIHtcblxuICB2YXIgZXh0cmFjdCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgLy8gKnVzdWFsbHkqIGFhMSA9IHN0YXRlIGFhMj0gY291bnR5ICBzbDEgPSBib3JvdWdoXG4gICAgbGV2ZWxfY29kZXMgPSBbXG4gICAgICAnbmVpZ2hib3Job29kJyxcbiAgICAgICdyb3V0ZScsXG4gICAgICAncG9zdGFsX2NvZGUnLFxuICAgICAgJ3Bvc3RhbF9jb2RlX3N1ZmZpeCcsXG4gICAgICAnbG9jYWxpdHknLFxuICAgICAgJ3N1YmxvY2FsaXR5X2xldmVsXzEnLFxuICAgICAgJ2FkbWluaXN0cmF0aXZlX2FyZWFfbGV2ZWxfMScsXG4gICAgICAnYWRtaW5pc3RyYXRpdmVfYXJlYV9sZXZlbF8yJ1xuICAgIF07XG5cbiAgICByZXR1cm4gdHlwZUdyZXAoZGF0YSxsZXZlbF9jb2Rlcyk7XG4gIH07XG5cbiAgZnVuY3Rpb24gdHlwZUdyZXAgKGRhdGEsbGV2ZWxfY29kZXMpIHtcbiAgICAvL25lZWQgdG8gZmlndXJlIG91dCBob3cgdG8gZmluZCB3aGF0IGZhaWxlZFxuICAgIHZhciBleHRyYWN0T2JqID0gIHt9O1xuXG4gICAgZm9yKHZhciBpID0gMCwgbiA9IGxldmVsX2NvZGVzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgdmFyIGl0ZW0gPSAkLmdyZXAoZGF0YSwgZnVuY3Rpb24gKGQsIGlkeCkge1xuICAgICAgICByZXR1cm4gZC50eXBlc1swXSA9PSBsZXZlbF9jb2Rlc1tpXVxuICAgICAgfSk7XG4gICAgICBpZiAoaXRlbS5sZW5ndGgpIHtcbiAgICAgICAgZXh0cmFjdE9ialtsZXZlbF9jb2Rlc1tpXV0gPSBpdGVtWzBdWydsb25nX25hbWUnXVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBleHRyYWN0T2JqO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBleHRyYWN0OiBleHRyYWN0XG4gIH1cblxufV0pO1xuXG5cbm91My5mYWN0b3J5KCdicm9veE1hcCcsIFsnJHEnLCckd2luZG93JywgZnVuY3Rpb24gKCRxLCAkd2luZG93KSB7XG4gIHZhciBnb29nbGUgPSAkd2luZG93Lmdvb2dsZTtcbiAgdmFyIGxvYWRHb29nbGVEZWZlciA9ICRxLmRlZmVyKCk7XG4gIHZhciBtYXBMb2FkZWREZWZlciA9ICRxLmRlZmVyKCk7XG4gIHZhciBjb29yZGluYXRlcyA9IHtsYXQ6IDQwLjIxNjMzOSwgbG5nOiAtNzQuNzQxNDI3fTtcbiAgdmFyIG1hcCA9IG51bGw7XG4gIHZhciBjdXJyZW50TWFya2VyID0gbnVsbDtcblxuICBnb29nbGUubWFwcy5ldmVudC5hZGREb21MaXN0ZW5lcigkd2luZG93LCAnbG9hZCcsIGdvb2dsZUxvYWRlZCk7XG5cbiAgZnVuY3Rpb24gZ29vZ2xlTG9hZGVkICgpIHtcbiAgICBsb2FkR29vZ2xlRGVmZXIucmVzb2x2ZSh0cnVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluaXRNYXAgKGNhbnZhcykge1xuICAgIHZhciBtYXBPcHRpb25zID0ge1xuICAgICAgY2VudGVyOiBjb29yZGluYXRlcywgLy9uZXcgJGcubWFwcy5MYXRMbmcoJHNjb3BlLnBvc2l0aW9uLmxhdGl0dWRlLCAkc2NvcGUucG9zaXRpb24ubG9uZ2l0dWRlKSxcbiAgICAgIHpvb206IDE1LFxuICAgICAgZGlzYWJsZURlZmF1bHRVSTogdHJ1ZSxcbiAgICAgIG1hcFR5cGVDb250cm9sOiB0cnVlLFxuICAgICAgbWFwVHlwZUNvbnRyb2xPcHRpb25zOiB7XG4gICAgICAgIHN0eWxlOiBnb29nbGUubWFwcy5NYXBUeXBlQ29udHJvbFN0eWxlLkRST1BET1dOX01FTlVcbiAgICAgIH0sXG4gICAgICBzdHJlZXRWaWV3Q29udHJvbDp0cnVlXG4gICAgfTtcblxuICAgIG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoY2FudmFzLCBtYXBPcHRpb25zKTtcbiAgICBtYXBMb2FkZWREZWZlci5yZXNvbHZlKCk7XG4gICAgc2V0TWFya2VyKCk7XG5cbiAgICAvL3JldHVybiBtYXA7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVNYXAgKGNvb3Jkcykge1xuICAgIC8vY29uc29sZS5sb2coXCJDb29yZHNcIiwgY29vcmRzKVxuICAgIC8vaWYgKCFjb29yZGluYXRlcy5oYXNPd25Qcm9wZXJ0eSgnaycpKSB7XG4gICAgICAvL2Nvb3JkaW5hdGVzID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhjb29yZHMubGF0aXR1ZGUsIGNvb3Jkcy5sb25naXR1ZGUpXG4gICAgLy99IGVsc2Uge1xuICAgICAgY29vcmRpbmF0ZXMgPSBjb29yZHM7XG4gICAgLy99XG5cblxuICAgIGlmKG1hcCkge1xuICAgICAgbWFwLnNldENlbnRlcihjb29yZGluYXRlcyk7XG4gICAgICBzZXRNYXJrZXIoKTtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gc2V0TWFya2VyICgpIHtcbiAgICBpZiAoY3VycmVudE1hcmtlcikge1xuICAgICAgY3VycmVudE1hcmtlci5zZXRNYXAobnVsbClcbiAgICB9XG5cbiAgICBjdXJyZW50TWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XG4gICAgICBwb3NpdGlvbjogY29vcmRpbmF0ZXMsXG4gICAgICBtYXA6IG1hcCxcbiAgICAgIGFuaW1hdGlvbjogZ29vZ2xlLm1hcHMuQW5pbWF0aW9uLkRST1AsXG4gICAgICB0aXRsZTogXCJZb3UgYXJlIEhlcmVcIlxuICAgIH0pXG4gIH1cblxuICByZXR1cm4ge1xuICAgIGxvYWRHb29nbGU6IGxvYWRHb29nbGVEZWZlci5wcm9taXNlLFxuICAgIG1hcExvYWRlZDogbWFwTG9hZGVkRGVmZXIucHJvbWlzZSxcbiAgICBnb29nbGU6IGdvb2dsZSxcbiAgICBpbml0TWFwOiBpbml0TWFwLFxuICAgIHVwZGF0ZU1hcDogdXBkYXRlTWFwLFxuICAgIExhdExuZzogZ29vZ2xlLm1hcHMuTGF0TG5nLFxuICAgIGdldE1hcmtlcjogZnVuY3Rpb24gKCkgeyByZXR1cm4gY3VycmVudE1hcmtlcn0sXG4gICAgZ2V0TWFwOiBmdW5jdGlvbiAoKSB7IHJldHVybiBtYXB9XG4gIH1cblxufV0pOyIsIm91My5jb250cm9sbGVyKCdEYXRhQ29udHJvbGxlcicsIFtcbiAgJyRzY29wZScsXG4gICdwbGFjZXInLFxuICAnYnJvb3hNYXAnLFxuICAnJHdpbmRvdycsXG4gIGZ1bmN0aW9uICgkc2NvcGUsIHBsYWNlciwgYnJvb3hNYXAsICR3aW5kb3cpIHtcbiAgJHNjb3BlLm1hcExvYWRlZCA9IGZhbHNlO1xuICAkc2NvcGUuYXJlYSA9IHt9O1xuXG4gICRzY29wZS4kb24oJ2dlb2NvZGUnLCBmdW5jdGlvbiAoZSwgZGF0YSkge1xuICAgICRzY29wZS5hcmVhID0gcGxhY2VyLmV4dHJhY3QoZGF0YSk7XG4gICAgJHNjb3BlLiRhcHBseSgpOyAvL2kga25vdyBpIGtub3cgaSBoYXZlIHRvIHJlZmFjdG9yIHRoaXNcblxuICB9KTtcblxuICAkc2NvcGUudG9nZ2xlTWluaUxvY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgY29uc29sZS5sb2coXCJ0b2dnbGluZ1wiKVxuICAgICRzY29wZS4kZW1pdCgndG9nZ2xlX21pbmlfbG9jaycpO1xuICB9O1xuXG4gICRzY29wZS5oYW5kbGVVcGRhdGVQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zb2xlLmxvZyhcImhhbmRsZVVwZGF0ZVBvc2l0aW9uIENhbGxlZFwiLCBhcmd1bWVudHMsIERhdGUubm93KCkpXG4gICAgJHNjb3BlLiRlbWl0KCd1cGRhdGVfcG9zaXRpb24nKVxuICB9O1xuXG4gICRzY29wZS5yZWxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgJHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgfTtcblxuXG4gIGJyb294TWFwLm1hcExvYWRlZC50aGVuKGZ1bmN0aW9uIChtYXApIHtcbiAgICAkc2NvcGUubWFwTG9hZGVkID0gdHJ1ZTtcbiAgfSk7XG5cbn1dKSIsIm91My5jb250cm9sbGVyKCdNYWluQ29udHJvbGxlcicsIFtcbiAgJyRzY29wZScsXG4gICckd2luZG93JyxcbiAgJ2Jyb294TWFwJyxcbiAgZnVuY3Rpb24gKCRzY29wZSwgJHdpbmRvdywgYnJvb3hNYXApIHtcbiAgICAvL2luaXRpYWwgY2hlY2tcbiAgICBpZiAoISR3aW5kb3cubmF2aWdhdG9yLmdlb2xvY2F0aW9uKSB7XG4gICAgICBhbGVydChcIlRoaXMgaXNuJ3QgZ29ubmEgd29yayBvdXQgOi9cIik7XG4gICAgfVxuXG4gICAgdmFyIGdlb2NvZGVyID0gbmV3IGJyb294TWFwLmdvb2dsZS5tYXBzLkdlb2NvZGVyKCk7XG4gICAgdmFyIG1hcENhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtYXAtY2FudmFzJyk7XG5cbiAgICAkc2NvcGUubWluaUxvY2sgPSBmYWxzZTtcbiAgICAkc2NvcGUuJG9uKCd0b2dnbGVfbWluaV9sb2NrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICRzY29wZS5taW5pTG9jayA9ICEkc2NvcGUubWluaUxvY2s7XG4gICAgfSk7XG5cblxuICAgICRzY29wZS5wb3NpdGlvbiA9IHtsYXQ6NDAuMjE2MzM5LCBsbmc6IC03NC43NDE0Mjd9OyAgLy9kZWZhdWx0IGNvb3Jkc1xuICAgICRzY29wZS51cGRhdGVQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwidXBkYXRlIHBvc2l0aW9uIGNhbGxlZFwiKTtcbiAgICAgICR3aW5kb3cubmF2aWdhdG9yLmdlb2xvY2F0aW9uLmdldEN1cnJlbnRQb3NpdGlvbihmdW5jdGlvbiAobG9jYXRpb24pIHtcbiAgICAgICAgJHNjb3BlLnBvc2l0aW9uID0gbmV3IGJyb294TWFwLkxhdExuZyhsb2NhdGlvbi5jb29yZHMubGF0aXR1ZGUsIGxvY2F0aW9uLmNvb3Jkcy5sb25naXR1ZGUpO1xuICAgICAgICBicm9veE1hcC51cGRhdGVNYXAoJHNjb3BlLnBvc2l0aW9uKTtcbiAgICAgICAgZ2VvY29kZXIuZ2VvY29kZSh7J2xhdExuZyc6ICRzY29wZS5wb3NpdGlvbn0sIGhhbmRsZUdlb0NvZGUpO1xuICAgICAgfSlcbiAgICB9O1xuXG4gICAgJHNjb3BlLiRvbigndXBkYXRlX3Bvc2l0aW9uJywgJHNjb3BlLnVwZGF0ZVBvc2l0aW9uKVxuXG4gICAgLy9tYWtlIHN1cmUgZ29vZ2xlIHNlcnZpY2UgaXMgbG9hZGVkXG4gICAgYnJvb3hNYXAubG9hZEdvb2dsZS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgIGJyb294TWFwLmluaXRNYXAobWFwQ2FudmFzKTtcbiAgICAgICRzY29wZS51cGRhdGVQb3NpdGlvbigpO1xuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gaGFuZGxlR2VvQ29kZSAoZGF0YSkge1xuICAgICAgaWYgKGRhdGEubGVuZ3RoICYmIGRhdGFbMF1bJ2FkZHJlc3NfY29tcG9uZW50cyddKSB7XG4gICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdnZW9jb2RlJywgZGF0YVswXVsnYWRkcmVzc19jb21wb25lbnRzJ10pXG4gICAgICB9XG4gICAgfVxuXG59XSkiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
